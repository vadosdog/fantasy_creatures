### **Game Design Document (GDD) — "Рунные Осколки"**

_Это не просто игра — это сборник мифов, которые ты оживишь_

**Версия:** 1.7
---

## **Концепция и сеттинг**

### **Мир и лор**

"Боги умерли, но их сны отказываются уходить..."

В эпоху Раскола древние божества пали в великой войне, а их души рассыпались на Рунные Осколки — кристаллы,
пульсирующие обрывки воспоминаний.

Природа осколков:

- Могут быть соединены в разумных существ — но только теми, кто чувствует их зов
- Хранят обрывки памяти о древних временах

### **Роль игрока**

Вы — Мастер Осколков:

- Редкие люди с врожденным даром
- Дар часто передается по крови, но иногда пробуждается после трагедий.
- Герой — последний ученик ордена "Стеклянных Псалмов", уцелевшего после гонений

_"Осколки шепчут. Одни — о любви, другие — о мести. Ты научишься их слышать."_ — Наставник Ордена.

Мастера осколков способны

- Приручать диких существ (в будущих версиях)
- Создавать новых существ через соединение осколков
- Исследовать мир в поисках древних легенд

---

## **Основные механики**

### **Исследование**

- **Статичный мир** с ключевыми локациями (город, Олимп, руины), но некоторые локации открывают вход в процедурные зоны:
- **Процедурные зоны** (лес, пещеры) генерируют:
    - Лабиринты с врагами и ловушками. Осколки искажают реальность, создавая лабиринные пространства
    - Выход на следующий уровень — скрытый проход или укрепленная позиция врагов.
    - Биомы Уникальные для каждой зоны (лес: болота/чащи; пещеры: залы/тоннели)
    - Каждый новый уровень увеличивает силу существ
    - Контент на уровнях:
        - Существа, осколки (редкость ↑ с глубиной)
        - Интерактивные объекты (статуи, деревья с рунами)
        - Выход на след. уровень находится в случайном месте локации
        - На некоторых уровнях доступны боссы с уникальными боевыми механиками и уникальными слабостями
        - Если игрок долго не может найти выход, давать подсказки как дойти до следующего этапа
    - Награды на уровнях
        - Осколки, ресурсы, артефакты и сюжетно важные предметы выпадают после битв или при исследовании интерактивных
          предметов
- **Сюжетные NPC** почти всегда в статичных точках. Но могут быть квесты, когда необходимо найти NPC в процедурной зоне
- **Враги и ловушки** почти всегда в генерируемых зонах. Но могут быть квесты, когда в статичной зоне появляется
  возможность начать битву с кем-то
- **Перемещение:**
    - Перемещение по статичному миру - кликом перемещение в связанную локацию, если локация не закрыта сюжетом
    - Перемещение в процедурной зоне: клик/WASD (без ограничений)
    - При поражении в битве: телепорт в ближайший город + шанс потери части ресурсов (25% золота для опытных игроков,
      для новичков без штрафа, например первые 5 боев)
    - При побеге из битвы: телепорт в ближайший город + шанс потери части ресурсов (10% золота для опытных игроков,
      для новичков без штрафа, например первые 5 боев)
    - При нахождении в процедурной зоне есть кнопка "Выйти из исследования", которая перемещает в точку входа в
      процедурную зону
- **Фамильяр**
    - Фамильяром является одно из выбранных героем существ в качестве основного помощника.
    - Фамильяр учавствует во всех битвах, а также помогает герою в исследованиях локаций: обезвреживание ловушек, поиск
      ресурсов и тд

### **Крафт существ**

Крафт существ доступен в лабораториях городов. Каждый крафт представляет собой мини-игру зависящую от выбранной стихии.

#### **Компоненты:**

- **Комбинации:** 27 вариантов (3 стихии × 3 формы × 3 эмоции)

#### **Процесс:**

1. Выбор 3 осколков (стихия + форма + эмоция).
2. Мини-игра (сложность зависит от комбинации).
3. Чем лучше пройдена мини игра, тем лучше характеристики получит итоговое существо

_в будущих версиях появится возможность пропустить мини игру, тогда существо получит минимальные характеристики_
_в будущих версиях появится возможность добавить риск в мини игру (в случае провала шанс что один из осколков
рассыпется),
увеличивающие характеристики итогового существа_

#### **Мини игры**

дательное описани мини игр появится позже

### **Прокачка и эволюция**

- **Уровни:** 1-30
- **Очки умений:**
    - Даются 2 очка за каждый уровень
    - Тратятся на улучшение характеристик
      - Стоимость одного пункта растет каждые 10 уровней. `baseCost × (1 + currentLevel / 10)`
    - Стоимость улучшения смотри в характиристиках существ
    - Ограничения: характеристика не может стать больше 50
    - Сумма стартовых очков существ - 20
- **Эволюции:**
    - Доступны 3 эволюции на 8-12,18-22 и 30 уровнях (у разных существ на разных уровнях)
    - Каждая эволюция раскрывает легенду существа, подробнее смотри в библиотеке легенд
    - Эволюция дает 5 очков прокачки
- **Навыки:**
    - Для разных существ на разных уровнях открываются новые доступные к изучанию навыки
    - Существо может одновременно обладать 4 навыками в бою

_"Существа растут, как дети. Сначала неуклюже, потом — пугающе прекрасно."_

### **Боевая система**

#### **Основные правила**

- **Формат:** Пошаговые сражения 6×6 на гексагональной сетке.
- **Очередность хода:** Зависит от параметра «Инициатива» существ.
- **Дальность хода:** Зависит от характеристики существа speedStat
- **Дальность атак/способностей:**
    - Ближний бой (1 клетка).
    - Дальний бой (2-3 клетки).

#### **Эффекты (бафы/дебафы)**

Все эффекты накладываются на какую-то длительность ходов, в зависимости от конкретного навыка.
Эффекты не стекаются, а увеличивают продолжительность. Нельзя наложить больше 3х бафов и 3 дебафов на существо, при
попытке наложить четвертый ничего не происходит

| Тип        | Название     | Эффект                                      |  
|------------|--------------|---------------------------------------------|
| **Бафы**   | Усиление     | +10% урона                                  |  
|            | Ускорение    | +2 к дальности перемещения                  |  
|            | Вампиризм    | 30% урона → HP                              |  
|            | Удача        | Шанс крита на +15%                          |  
|            | Регенерация  | Увеличивает здоровье каждый ход             |  
|            | Шипы         | Возвращает 20% полученного урона атакующему |  
|            | Щит          | Увеличивает защиту на 10%                   |  
| **Дебафы** | Яд           | 5% макс. HP за ход                          |  
|            | Кровотечение | 8% макс. HP за ход (лечение снимает)        |  
|            | Поджог       | защита -15%, -7%HP каждый ход               |  
|            | Безумие      | +20% атаки, -15% защиты, 10% HP за ход      |
|            | Заморозка    | Уменьшает дальность хода на 1               |
|            | Ослеплен     | Шанс атаки -25%                             |
|            | Проклят      | Проклятие снижает max HP на 10%             |
|            | Страх        | -15% к атаке                                |

#### **Стихийные взаимодействия**

- **Модификаторы урона:**
    - Сильная стихия: ×1.5.
    - Слабая стихия: ×0.75.
    - Нейтральные атаки-атаки: ×1 (кроме будущих духов).

#### **Формулы:**

1. **Шанс попадания:**
   Не может быть ниже 5% и больше 99%, независимо от бафов и дебафов, всегда шанс промаха или попадания
   ```
   hitChance = max(0.05, min(0.99, 
     skill.hitChance
   ))
   ```

2. **Шанс крита:**
   Не может быть больше 25%, независимо от бафов
   ```
   critChance = min(0.25, max(0, 
     skill.critChance + 
     (attacker.willStat - defender.willStat) / 100
   ))
   ```

3. **Урон:**
   Не может быть ниже 30% от базового урона
   ```
   damage = max(
     skill.baseDamage * 0.3,
     floor(
       skill.baseDamage * 
       (attacker.attackStat / defender.defenseStat) * 
       elementModifier * 
       (isCrit ? 1.1 : 1)
     )
   )
   ```

4. **Лечение:**  
   *(Аналогично урону, но `baseDamage` → `baseHeal`)*

5. **Наложение эффектов:**
    - На себя: `effect.chance` (без проверок).
    - На врага:
      ```
      effectChance = max(0, 
        effect.chance + 
        (attacker.willStat - defender.willStat) / 100
      )
      ```

---

### **Экономика**

#### **Ресурсы**

- **Золото:**
    - Получается за бои, квесты, или продажу существ другим NPC.
        - Исследования 10-20 золота за обычные предметы
        - Исследования 20-50 золота за загадки/сундики/сложные места
        - Обычный бой - 50-100 золота
        - Босс - 300-500 золота
    - Тратится на артефакты, осколки у NPC
- **Осколки:**
    - ДРОП:
        - Обычные: 15% за бой, 5% за исследование
        - Редкие: 5% за бой, 1% за исследование
    - Уникальные (из сюжета/ивентов). Уникальные осколки нельзя продать или потерять при крафте/поражении в бою.
    - Уникальные осколки могут выпасть с редким дропом из боссов - 20%
    - Осколки одноразовые, если их использовали при крафте, вернуть их нельзя

#### **Магазин NPC**

- **Продажа игроку:**
    - Осколки - 300-1500 золота (зависит от редкости)
    - Артефакты («Зеркало Души») - 1000-5000 золота
- **Покупка игроком:**
    - Осколки - 100-500 золота (зависит от редкости)
    - Существ (только обычных) - 50-500 золота в зависимости от качества и уровня

---

### **Контент первой версии (MVP)**

### **Глобальная карта**

- **Статичный остров с локациями:**
    - **Город-хаб ("Стеклянный Ковчег")** — мастерская, торговцы, сюжетные NPC
    - **Олимп** (финал)
    - **3-5 сюжетных точек**
    - **Зоны исследования** (лес, пещеры, вулкан)
        - Лес Плачущих Столпов (трава/яд).
        - Пещеры Голодных Теней (тьма/страх).
        - Руины Алхимической Башни (огонь/азарт).

### **Комбинации осколков**

- **27 вариантов** (3 стихии × 3 формы × 3 эмоции).
- Пример:
    - Огонь + Птица + Азарт → ДД с высокой инициативой.
    - Вода + Рептилия + Надежда → Саппорт с лечением.

### **Боссы**

_Легенды не умирают. Они просто ждут, чтобы их переписали._

- **Механики:**
    - **Лесной страж (Трава):** Накладывает "Яд" на всю команду.
    - **Пламенный дракон (Огонь):** Криты поджигают.
- **Боссы как Великие Легенды**
    - Особенности:
        - Каждый босс — ключевой персонаж в истории мира (например, "Лесной Страж" — бывший защитник священной рощи,
          проклятый за отказ подчиниться богам).
        - Их легенда раскрывается частями только после победы над всеми тремя:
        - 1-й босс: Намёк на трагедию ("Он когда-то был человеком...").
        - 2-й босс: Детали конфликта ("Боги предложили ему бессмертие в обмен на предательство").
        - 3-й босс: Финал и мораль ("Он выбрал вечные муки, но спас своих детей").
    - Награда:
        - После триумфа игрок получает артефакт-реликвию (например, "Шепчущий Талисман"), который открывает доступ к
          тайному тексту — полной версии саги.
        - Бонусы за коллекцию. Если игрок собрал все легенды какой-то цепочки (все огненные или все легенды птиц), то
          игрок получает какой-то уникальный артефакт

### **Существа и осколки**

#### **Виды осколков**

#### **Существа как Легенды**

Каждое созданное игроком существо — не просто боевая единица, а ожившая легенда, фрагмент памяти погибших богов
Прогрессия истории:

- 1-й уровень: Обрывки фраз, намёки на прошлое (например: "Птица из пламени... она кричала, когда падала...").
- После 1-й b 2-й эволюции: Появляются детали места или события ("Её крылья подожгли стрелы охотников из города Гнева").
- Финальная эволюция: Полный текст легенды с иллюстрацией (стилизованный свиток или голографический силуэт).

```
Пример для существа "Пламенный Ящер":
1 ур.: "Говорят, он родился из последнего вздоха бога войны..."
Эволюция (12 ур.): "Он сжёг дотла храм своего создателя, но не из ненависти — чтобы спасти тех, кого там мучили"
30 ур.: Полная поэма о боге-мятежнике, который пожертвовал собой, чтобы остановить казнь невинных.
```

##### **Библиотека Легенд**

- Меню в главном хабе (раздел "Стеклянные Архивы"), где:
    - Коллекция: Все собранные существа с их текущими историями.
    - Прогресс: Индикатор *"Легенд собрано: 5/27"* (для MVP — 3/27).
    - Галерея: Возможность перечитать истории и сравнить этапы эволюции.
- Дизайн:
    - Книги на полках светятся, если легенда завершена.
    - Пустые ячейки затемнены, но показывают силуэты недостающих существ. Достаточно, чтобы заинтриговать игрока, но не
      проспойлерить существо

#### **Классификация существ**

- **По стихиям:**
    - Огонь, Вода, Трава
    - В будущем постепенно будут добавляться новые стихии как в покемонах

- **По формам:**
    - Форма определяет внешний вид существа
    - Форма определяет, какую помощь оказывает существо при исследовании Зверь (чует осколки через стены), Птица (видит
      секретные двери), Рептилия (обнаруживает ловушки)
    - В будущем постепенно будут добавляться новые формы (например Гуманоид, Конструкт, Дух)

- **По эмоциям:**
    - Эмоция определяет роль в бою: Ярость(Танк), Азарт (ДД), Надежда (Саппорт)
    - В будущем постепенно будут добавляться новые эмоции

#### **Характеристики существ**

#### **Базовые статы:**

| Параметр         | Описание                  | Формула влияния                  | Формула прокачки за 1 очко |  
|------------------|---------------------------|----------------------------------|----------------------------|  
| `maxHealthStat`  | Макс. здоровье            | -                                | 20                         |  
| `speedStat`      | Клетки перемещения за ход | -                                | не прокачивается           |  
| `attackStat`     | Силу урона                | Увеличивает урон                 | 5                          |  
| `defenseStat`    | Защита от урона           | Уменьшает урон                   | 5                          |  
| `initiativeStat` | Очередь хода              | Определяет порядок действий      | 5                          |  
| `willStat`       | Сопротивление эффектам    | Влияет на шанс наложения дебафов | 5                          |  
| `element`        | Стихия                    | Определяет модификаторы урона    | 5                          |  

#### **Роли и акценты:**

| Эмоция  | Роль    | Ключевые статы                  |  
|---------|---------|---------------------------------|  
| Ярость  | Танк    | high maxHealthStat, defenseStat |  
| Азарт   | ДД      | high attackStates               |  
| Надежда | Саппорт | high willStat, initiativeStat   |  

#### **Примеры существ**

1. **Пламенный ящер (Огонь + Зверь + Ярость):**
    - Высокая атака, поджог при критическом ударе.
2. **Водный страж (Вода + Гуманоид + Спокойствие):**
    - Лечение союзников, сопротивление огню.

#### **Осколки**

- **Типы:**
    - **Стихии:** Определяют основной тип урона.
    - **Формы:** Влияют на базовые характеристики и роли в качестве фамильяра
    - **Эмоции:** Дают пассивные эффекты (например, Ярость +5% к криту).

#### **Типы навыков:**

- **Боевые (melee/ranged):** Наносят урон + могут накладывать эффекты.
- **Лечение (treat):** Восстанавливают HP + бафы.

---

### **Баланс**

#### **Общий цикл геймплея***

Пример сессии на 1 час игры

- Исследование (15 мин) → 2 локации, 5–7 боёв.
- Бои (20 мин) → 1–2 сложных, остальные простые.
- Ресурсы/крафт (10 мин) → улучшение 2–3 существ.
- Новая цель (15 мин) → подготовка к боссу или PvP
- MVP (27 существ):
    - На 100% завершение = ~15 часов.
    - Исследование: 7 ч.
    - Бои: 5 ч.
    - Крафт/прокачка: 3 ч.
- Скорость прогресса
    - 1 новое существо каждые 30-60 минут
    - 1 эволюция каждые 2–3 час
- Дополнительный контент:
- Секретные боссы (+2 ч)
- Коллекционные достижения (+3 ч)

#### **Исследования**

- Разнообразие локаций (лес, пещеры, руины) с разными типами существ и ресурсов.
- Случайные события (редкие существа, скрытые боссы, тайники).
- Мини-головоломки (например, нужно выбрать правильный путь или активировать артефакт для доступа к редкому существу).
- Информационная ценность (игрок должен понимать, что исследование помогает ему находить лучших существ или ресурсы для
  крафта).
- Не делать исследование слишком долгим, иначе оно станет рутиной
- Давать игроку выбор: идти в опасную зону за редкими существами или остаться в безопасной, но с меньшей наградой
- Оптимально: 5–15 минут на прохождение одной зоны
    - Первые уровни: 5–8 минут.
    - Средние уровни: 10–12 минут.
    - Большие уровни: 15–20 минут
- Как достичь:
    - 5–10 точек интереса (враги, сундуки, NPC) на локацию.
    - Случайные события (25% шанс встретить редкого монстра).
    - Возможность пропускать (если игрок хочет быстрее добраться до боя).
- Способности фамильяров в исследовании не должны заменять собой игровой процесс (например, "автопоиск выхода" ломает
  баланс). 1–2 дополнительных осколка за исследование

#### **Бой**

- Баланс классов
    - Танки должны быть живучими, но не убийцами
    - ДД — высокий урон, но уязвимость
    - Саппорты — полезные бафы/дебафы, но слабая защита
- Стихии (огонь-вода-трава)
    - Четкие модификаторы урона между стихиями
    - Возможность собирать команды с покрытием слабостей
- Разнообразие атак
    - Существо должно обладать навыки атак своей стихии или normal
    - Шанс попадания обратно пропорционален наносимому урону (в зависимости от классов)
    - Ограниченное использование сильных атак (как PP в покемонах) (в следующих обновлениях)
- Между боями здоровье существ сохраняется (если существо ранили в прошлом бою, новый бой оно начинает новый бой с
  меньшим коилчеством ХП). Полностью вылечить существа можно в городе
- Оптимально: 2–5 минут на стандартный бой
    - Простые бои (обычные мобы): 1–2 минуты
    - Средние (мини-боссы, сильные отряды): 3–4 минуты
    - Сложные (боссы, PvP): 5–7 минут
- Как достичь
    - 3–5 раундов на стандартный бой.
    - Ограниченные способности (например, 5–10 PP на атаку, как в Pokémon)
    - Четкие роли существ (танк держит удар, ДД быстро убивает).

#### **Получение ресурсов (вознаграждение)**

Цель: Чувство прогресса и мотивация продолжать. Как добиться:

- Разные типы ресурсов:
    - Обычные (для базовых существ).
    - Редкие (для элитных существ или улучшений).
- Бонусы за сложные битвы:
    - Победа над боссом дает уникальный ресурс.
    - Цепочка побед увеличивает награду.
- Рандом с контролем:
    - Игрок всегда получает что-то полезное, но редкие вещи — не слишком часто.
- Не давать слишком много ресурсов (игра становится легкой)
- Не делать дроп слишком редким (игрок разочаровывается)

#### Крафт и развитие существ

Цель: Чувство роста и персонализации команды

- Гибкость прокачки
    - Можно качать существ в разных направлениях (танк-саппорт гибрид или чистый ДД).
    - Новые атаки открывают тактические варианты
- Крафт существ
    - Комбинирование ресурсов для создания уникальных существ
    - Возможность "эволюции" (улучшения существ в более сильные формы)
- Ограничения
    - Максимальный уровень/апгрейды, чтобы игрок не мог "сломать" баланс
- Не делать существ "бесполезными" — у каждого должна быть ниша
- Давать игроку пробовать разные стратегии (а не только "качаю одного монстра и бью им всех").
- Оптимально: 0.5–3 минуты на создание/улучшение одного существа
    - Базовый крафт (обычное существо): ~30 сек
    - Продвинутый (редкое/гибридное): 2–3 мин

#### Общий баланс между этапами

- Исследование → Бой
    - Чем глубже игрок исследует, тем сложнее бои, но и награды лучше.
- Бой → Ресурсы
    - Награда должна соответствовать сложности
- Ресурсы → Крафт/Развитие:
    - Игрок должен чувствовать, что его усилия окупаются.
- Крафт → Новые бои:
    - Улучшенные существа позволяют идти в более сложные зоны
- Дополнительные фишки для удержания интереса
    - Легендарные существа (как покемоны-легендарки) — сложно поймать, но очень мощные
    - PvP-режим — чтобы игроки тестировали свои стратегии появится в следующих обновлениях
    - Сюжет/квесты — чтобы было ради чего играть, а не просто "бей-собирай-крафть".
-

---

### **Технические детали**

#### **Платформа**

- **Phaser 3** (браузерная 2D RPG).
- **Управление:** WASD — движение, клик — взаимодействие или перемещение

#### **Сохранения**

- Локальные (localStorage) + экспорт в JSON (файл).
- Резерв: Экспорт/импорт строки кода.
- Автосохранения при попадании в генерируемую локацию или начало битвы

---

### **Дорожная карта**

#### **Версия 1.0 (Базовый релиз)**

- 5 статичных локаций
- 3 генерируемых области
- 27 комбинаций существ
- Линейный сюжет
- 9 боссов

#### **Версия 1.5 (Q1 2024)**

- Система талантов.
- 3 новые стихии.
- PP атак

#### **Версия 2.0 (Q3 2024)**

- PvP-арена.
- Кооперативные рейды.

---

### **Приложения**

#### **Глоссарий**

- **Зеркало Души:** Артефакт для сброса очков умений

#### **Референсы**

- **Геймплей:** Pokémon + HoMM.
- **Сеттинг:** Dark Souls (атмосфера).

#### **Риски**

- Баланс боевой системы — формулы урона и шансов стоит протестировать, чтобы избежать ситуаций, где один параметр (
  например, willStat) становится критически важным
- Мини-игры в крафте — если они будут слишком сложными или однообразными, игроки могут устать от них
- Прогрессия в процедурных зонах — важно, чтобы игрок чувствовал рост сложности, но не сталкивался с резкими скачками.
  Идеально - динамическая сложность: средний уровень команды игрока + уровень зоны
- Если выход из процедурной зоны генерируется случайно, как это сочетается с квестами "найти NPC в зоне"? NPC может
  оказаться за непроходимым барьером. Решение: Если NPC оказывается в такой зоне добавлять сатирический диалог типа "
  так близко и так далеко"

#### **Идеи**

- Добавить ветвление историй существ в зависимости от действий игрока (например, если Пламенный Ящер убил 20 врагов с
  поджогом, его легенда дополнится строкой о "ненасытной жажде разрушения").
- Синергия стихий в команде: Если в отряде есть существа с определенными стихиями (Огонь + Вода), давать бонусы (
  например, +5% к урону) или
  уникальные комбо-способности
- Альтернативные способы крафта: Позволить игрокам комбинировать 4+ осколка для создания "гибридных" существ (например,
  Огонь + Вода + Птица + Ярость = Феникс).
- Исследовательские события: В процедурных зонах можно добавлять небитвенные события:
    - Алтари, где можно пожертвовать существо для усиления другого.
    - Зеркала, показывающие отражения забытых богов (намёки на лор).
