### **Game Design Document (GDD) — "Рунные Осколки"**

_Это не просто игра — это сборник мифов, которые ты оживишь_

**Версия:** 1.7
---

## **Концепция и сеттинг**

### **Мир и лор**

"Боги умерли, но их сны отказываются уходить..."

В эпоху Раскола древние божества пали в великой войне, а их души рассыпались на Рунные Осколки — кристаллы,
пульсирующие обрывки воспоминаний.

Природа осколков:

- Могут быть соединены в разумных существ — но только теми, кто чувствует их зов
- Хранят обрывки памяти о древних временах

### **Роль игрока**

Вы — Мастер Осколков:

- Редкие люди с врожденным даром
- Дар часто передается по крови, но иногда пробуждается после трагедий.
- Герой — последний ученик ордена "Стеклянных Псалмов", уцелевшего после гонений

_"Осколки шепчут. Одни — о любви, другие — о мести. Ты научишься их слышать."_ — Наставник Ордена.

Мастера осколков способны

- Приручать диких существ (в будущих версиях)
- Создавать новых существ через соединение осколков
- Исследовать мир в поисках древних легенд

---

## **Основные механики**

### **Исследование**

- **Статичный мир** с ключевыми локациями (город, Олимп, руины), но некоторые локации открывают вход в процедурные зоны:
- **Процедурные зоны** (лес, пещеры) генерируют:
    - Лабиринты с врагами и ловушками. Осколки искажают реальность, создавая лабиринные пространства
    - Выход на следующий уровень — скрытый проход или укрепленная позиция врагов.
    - Биомы Уникальные для каждой зоны (лес: болота/чащи; пещеры: залы/тоннели)
    - Каждый новый уровень увеличивает силу существ
    - Контент на уровнях:
        - Существа, осколки (редкость ↑ с глубиной)
        - Интерактивные объекты (статуи, деревья с рунами)
        - Выход на след. уровень находится в случайном месте локации
        - На некоторых уровнях доступны боссы с уникальными боевыми механиками
        - Если игрок долго не может найти выход, давать подсказки как дойти до следующего этапа
    - Награды на уровнях
        - Осколки, ресурсы, артефакты и сюжетно важные предметы выпадают после битв или при исследовании интерактивных
          предметов
- **Сюжетные NPC** почти всегда в статичных точках. Но могут быть квесты, когда необходимо найти NPC в процедурной зоне
- **Враги и ловушки** почти всегда в генерируемых зонах. Но могут быть квесты, когда в статичной зоне появляется
  возможность начать битву с кем-то
- **Перемещение:**
    - Перемещение по статичному миру - кликом перемещение в связанную локацию, если локация не закрыта сюжетом
    - Перемещение в процедурной зоне: клик/WASD (без ограничений)
    - При поражении в битве: телепорт в ближайший город + шанс потери части ресурсов (10% золота для опытных игроков,
      для новичков без штрафа)
    - При нахождении в процедурной зоне есть кнопка "Выйти из исследования", которая перемещает в точку входа в
      процедурную зону
- **Фамильяр**
    - Фамильяром является одно из выбранных героем существ в качестве основного помощника.
    - Фамильяр учавствует во всех битвах, а также помогает герою в исследованиях локаций: обезвреживание ловушек, поиск
      ресурсов и тд

### **Крафт существ**

Крафт существ доступен в лабораториях городов. Каждый крафт представляет собой мини-игру зависящую от выбранной стихии.

#### **Компоненты:**

- **Комбинации:** 27 вариантов (3 стихии × 3 формы × 3 эмоции)

#### **Процесс:**

1. Выбор 3 осколков (стихия + форма + эмоция).
2. Мини-игра (сложность зависит от комбинации).
3. Чем лучше пройдена мини игра, тем лучше характеристики получит итоговое существо

_в будущих версиях появится возможность пропустить мини игру, тогда существо получит средние характеристики_
_в будущих версиях появится возможность добавить риск в мини игру (в случае провала используемые осколки рассыпаются),
увеличивающие характеристики итогового существа_

#### **Мини игры**

Появятся в отдельном приложении

### **Прокачка и эволюция**

- **Уровни:** 1-30
- **Очки умений:**
    - Даются за каждый уровень
    - Тратятся на улучшение характеристик (+1 к атаке/защите/HP за 1 очко)
- **Эволюции:**
    - Каждая эволюция изменяет внешность существа и доает ему бонусы к характеристикам или дает новый навык
    - Доступны 3 эволюции на 8-12,18-22 и 30 уровнях (у разных существ на разных уровнях)
    - Каждая эволюция раскрывает легенду существа, подробнее смотри в библиотеке легенд

_"Существа растут, как дети. Сначала неуклюже, потом — пугающе прекрасно."_

### **Боевая система**

#### **Основные правила**

- **Формат:** Пошаговые сражения 6×6 на гексагональной сетке.
- **Очередность хода:** Зависит от параметра «Инициатива» существ.
- **Дальность хода:** Зависит от характеристики существа speedStat
- **Дальность атак/способностей:**
    - Ближний бой (1 клетка).
    - Дальний бой (2-3 клетки).

#### **Эффекты (бафы/дебафы)**

Все эффекты накладываются на какую-то длительность ходов. В зависимости от конкретного навыка

| Тип        | Название     | Эффект                                      |  
|------------|--------------|---------------------------------------------|
| **Бафы**   | Усиление     | +10% урона                                  |  
|            | Ускорение    | +2 к дальности перемещения                  |  
|            | Вампиризм    | 30% урона → HP                              |  
|            | Удача        | Шанс крита на +15%                          |  
|            | Регенерация  | Увеличивает здоровье каждый ход             |  
|            | Шипы         | Возвращает 20% полученного урона атакующему |  
|            | Щит          | Увеличивает защиту на 10%                   |  
| **Дебафы** | Яд           | 5% макс. HP за ход                          |  
|            | Кровотечение | 8% макс. HP за ход (лечение снимает)        |  
|            | Поджог       | защита -15%, -7%HP каждый ход               |  
|            | Безумие      | +30% атаки, -20% защиты, 10% HP за ход      |
|            | Заморозка    | Уменьшает дальность хода на 1               |
|            | Ослеплен     | Шанс атаки -25%                             |
|            | Проклят      | Проклятие снижает max HP на 20%             |
|            | Страх        | -15% к атаке                                |

#### **Стихийные взаимодействия**

- **Модификаторы урона:**
    - Сильная стихия: ×1.5.
    - Слабая стихия: ×0.75.
    - **Normal-атаки:** ×1 (кроме будущих духов).

#### **Формулы:**

1. **Шанс попадания:**
   ```
   hitChance = max(0.05, min(0.99, 
     skill.hitChance + 
     (attacker.initiativeStat - defender.initiativeStat) / 100
   ))
   ```

2. **Шанс крита:**
   ```
   critChance = max(0, 
     skill.critChance + 
     (attacker.willStat - defender.willStat) / 100
   )
   ```

3. **Урон:**
   ```
   damage = max(
     skill.baseDamage * 0.3,
     floor(
       skill.baseDamage * 
       (attacker.attackStat / defender.defenseStat) * 
       elementModifier * 
       (isCrit ? 1.15 : 1)
     )
   )
   ```

4. **Лечение:**  
   *(Аналогично урону, но `baseDamage` → `baseHeal`)*

5. **Наложение эффектов:**
    - На себя: `effect.chance` (без проверок).
    - На врага:
      ```
      effectChance = max(0, 
        effect.chance + 
        (attacker.willStat - defender.willStat) / 100
      )
      ```

---

### **Экономика**

#### **Ресурсы**

- **Золото:**
    - Получается за бои, квесты, или продажу существ другим NPC.
    - Тратится на артефакты, осколки у NPC
- **Осколки:**
    - Обычные (выпадают везде).
    - Уникальные (только из сюжета/ивентов). Уникальные осколки нельзя продать или потерять при крафте/поражении в бою.
    - Осколки одноразовые, если их использовали при крафте, вернуть их нельзя

#### **Магазин NPC**

- **Продажа:** Осколки, артефакты («Зеркало Души»).
- **Покупка:** Существ (только обычных).

---

### **Контент первой версии (MVP)**

### **Глобальная карта**

- **Статичный остров с локациями:**
    - **Город-хаб ("Стеклянный Ковчег")** — мастерская, торговцы, сюжетные NPC
    - **Олимп** (финал)
    - **3-5 сюжетных точек**
    - **Зоны исследования** (лес, пещеры, вулкан)
        - Лес Плачущих Столпов (трава/яд).
        - Пещеры Голодных Теней (тьма/страх).
        - Руины Алхимической Башни (огонь/азарт).

### **Комбинации осколков**

- **27 вариантов** (3 стихии × 3 формы × 3 эмоции).
- Пример:
    - Огонь + Птица + Азарт → ДД с высокой инициативой.
    - Вода + Рептилия + Надежда → Саппорт с лечением.

### **Боссы**

_Легенды не умирают. Они просто ждут, чтобы их переписали._

- **Механики:**
    - **Лесной страж (Трава):** Накладывает "Яд" на всю команду.
    - **Пламенный дракон (Огонь):** Криты поджигают.
- **Боссы как Великие Легенды**
    - Особенности:
        - Каждый босс — ключевой персонаж в истории мира (например, "Лесной Страж" — бывший защитник священной рощи,
          проклятый за отказ подчиниться богам).
        - Их легенда раскрывается частями только после победы над всеми тремя:
        - 1-й босс: Намёк на трагедию ("Он когда-то был человеком...").
        - 2-й босс: Детали конфликта ("Боги предложили ему бессмертие в обмен на предательство").
        - 3-й босс: Финал и мораль ("Он выбрал вечные муки, но спас своих детей").
    - Награда:
        - После триумфа игрок получает артефакт-реликвию (например, "Шепчущий Талисман"), который открывает доступ к
          тайному тексту — полной версии саги.
        - Бонусы за коллекцию. Если игрок собрал все легенды какой-то цепочки (все огненные или все легенды птиц), то
          игрок получает какой-то уникальный артефакт

### **Существа и осколки**

#### **Виды осколков**

#### **Существа как Легенды**

Каждое созданное игроком существо — не просто боевая единица, а ожившая легенда, фрагмент памяти погибших богов
Прогрессия истории:

- 1-й уровень: Обрывки фраз, намёки на прошлое (например: "Птица из пламени... она кричала, когда падала...").
- После 1-й b 2-й эволюции: Появляются детали места или события ("Её крылья подожгли стрелы охотников из города Гнева").
- Финальная эволюция: Полный текст легенды с иллюстрацией (стилизованный свиток или голографический силуэт).

```
Пример для существа "Пламенный Ящер":
1 ур.: "Говорят, он родился из последнего вздоха бога войны..."
Эволюция (12 ур.): "Он сжёг дотла храм своего создателя, но не из ненависти — чтобы спасти тех, кого там мучили"
30 ур.: Полная поэма о боге-мятежнике, который пожертвовал собой, чтобы остановить казнь невинных.
```

##### **Библиотека Легенд**

- Меню в главном хабе (раздел "Стеклянные Архивы"), где:
    - Коллекция: Все собранные существа с их текущими историями.
    - Прогресс: Индикатор *"Легенд собрано: 5/27"* (для MVP — 3/27).
    - Галерея: Возможность перечитать истории и сравнить этапы эволюции.
- Дизайн:
    - Книги на полках светятся, если легенда завершена.
    - Пустые ячейки затемнены, но показывают силуэты недостающих существ. Достаточно, чтобы заинтриговать игрока, но не
      проспойлерить существо

#### **Классификация существ**

- **По стихиям:**
    - Огонь, Вода, Трава
    - В будущем постепенно будут добавляться новые стихии как в покемонах

- **По формам:**
    - Форма определяет внешний вид существа
    - Форма определяет, какую помощь оказывает существо при исследовании Зверь (чует осколки через стены), Птица (видит
      секретные двери), Рептилия (обнаруживает ловушки)
    - В будущем постепенно будут добавляться новые формы (например Гуманоид, Конструкт, Дух)

- **По эмоциям:**
    - Эмоция определяет роль в бою: Ярость(Танк), Азарт (ДД), Надежда (Саппорт)
    - В будущем постепенно будут добавляться новые эмоции

#### **Характеристики существ**

#### **Базовые статы:**

| Параметр         | Описание                  | Формула влияния                  |  
|------------------|---------------------------|----------------------------------|  
| `maxHealthStat`  | Макс. здоровье            | -                                |  
| `speedStat`      | Клетки перемещения за ход | -                                |  
| `attackStat`     | Шанс попадания (база)     | Влияет на hitChance              |  
| `defenseStat`    | Шанс защиты               | Уменьшает урон                   |  
| `initiativeStat` | Очередь хода              | Определяет порядок действий      |  
| `willStat`       | Сопротивление эффектам    | Влияет на шанс наложения дебафов |  
| `element`        | Стихия                    | Определяет модификаторы урона    |  

#### **Роли и акценты:**

| Эмоция  | Роль    | Ключевые статы                  |  
|---------|---------|---------------------------------|  
| Ярость  | Танк    | high maxHealthStat, defenseStat |  
| Азарт   | ДД      | high attackStates               |  
| Надежда | Саппорт | high willStat, initiativeStat   |  

#### **Примеры существ**

1. **Пламенный ящер (Огонь + Зверь + Ярость):**
    - Высокая атака, поджог при критическом ударе.
2. **Водный страж (Вода + Гуманоид + Спокойствие):**
    - Лечение союзников, сопротивление огню.

#### **Осколки**

- **Типы:**
    - **Стихии:** Определяют основной тип урона.
    - **Формы:** Влияют на базовые характеристики и роли в качестве фамильяра
    - **Эмоции:** Дают пассивные эффекты (например, Ярость +5% к криту).

#### **Типы навыков:**

- **Боевые (melee/ranged):** Наносят урон + могут накладывать эффекты.
- **Лечение (treat):** Восстанавливают HP + бафы.

---

### **Технические детали**

#### **Платформа**

- **Phaser 3** (браузерная 2D RPG).
- **Управление:** WASD — движение, клик — взаимодействие или перемещение

#### **Сохранения**

- Локальные (localStorage) + экспорт в JSON (файл).
- Резерв: Экспорт/импорт строки кода.
- Автосохранения при попадании в генерируемую локацию или начало битвы

---

### **Дорожная карта**

#### **Версия 1.0 (Базовый релиз)**

- 5 статичных локаций
- 3 генерируемых области
- 27 комбинаций существ
- Линейный сюжет
- 9 боссов

#### **Версия 1.5 (Q1 2024)**

- Система талантов.
- 3 новые стихии.

#### **Версия 2.0 (Q3 2024)**

- PvP-арена.
- Кооперативные рейды.

---

### **Приложения**

#### **Глоссарий**

- **Зеркало Души:** Артефакт для сброса очков умений
- Новым игроком для каждой механики считается игрок делающий это впервые, первые несколько раз, или до определенной
  точки сюжета (например штрафов нет в тренировочной комнате или до победы над первым боссом)

#### **Референсы**

- **Геймплей:** Pokémon + HoMM.
- **Сеттинг:** Dark Souls (атмосфера).

#### **Риски**

- Баланс боевой системы — формулы урона и шансов стоит протестировать, чтобы избежать ситуаций, где один параметр (
  например, willStat) становится критически важным
- Мини-игры в крафте — если они будут слишком сложными или однообразными, игроки могут устать от них
- Прогрессия в процедурных зонах — важно, чтобы игрок чувствовал рост сложности, но не сталкивался с резкими скачками
- Если выход из процедурной зоны генерируется случайно, как это сочетается с квестами "найти NPC в зоне"? NPC может
  оказаться за непроходимым барьером. Решение: Если NPC оказывается в такой зоне добавлять сатирический диалог типа "
  так близко и так далеко"

#### **Идеи**

- Добавить ветвление историй существ в зависимости от действий игрока (например, если Пламенный Ящер убил 20 врагов с
  поджогом, его легенда дополнится строкой о "ненасытной жажде разрушения").
- Синергия стихий в команде: Если в отряде есть существа с определенными стихиями (Огонь + Вода), давать бонусы (
  например, +5% к урону) или
  уникальные комбо-способности
- Альтернативные способы крафта: Позволить игрокам комбинировать 4+ осколка для создания "гибридных" существ (например,
  Огонь + Вода + Птица + Ярость = Феникс).
- Исследовательские события: В процедурных зонах можно добавлять небитвенные события:
    - Алтари, где можно пожертвовать существо для усиления другого.
    - Зеркала, показывающие отражения забытых богов (намёки на лор).
