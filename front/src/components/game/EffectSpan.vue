<script setup>
import {computed} from 'vue';

const props = defineProps({
    effect: {
        type: Object,
        required: true,
        validator: (eff) => 'effect' in eff
    },
    type: {
        default: 'span'
    }
});

// –ú–∞–ø–∏–Ω–≥ –∏–∫–æ–Ω–æ–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
const effectIcons = {
    // –ë–∞—Ñ—ã
    'empower': 'üí™',
    'haste': '‚ö°',
    'luck': 'üçÄ',
    'regen': 'üíö',
    'thorns': 'üåµ',
    'aegis': 'üõ°Ô∏è',
    'defense': 'üõ°Ô∏è',

    // –î–µ–±–∞—Ñ—ã
    'poison': '‚ò†Ô∏è',
    'bleed': 'üíâ',
    'burn': 'üî•',
    'freeze': 'ü•∂',
    'chill': '‚ùÑÔ∏è',
    'blind': 'üëÅÔ∏è‚Äçüó®Ô∏è',
    'curse': 'üìõ',
    'madness': 'ü§™',
    'fear': 'üò±',
    'confusion': 'üòñ'
};

// –ü–æ–ª—É—á–∞–µ–º –∏–∫–æ–Ω–∫—É –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞
const icon = computed(() => {
    console.log(props.effect)
    return effectIcons[props.effect.effect] || '';
});

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞
const colorClass = computed(() => {
    const buffs = ['empower', 'haste', 'luck', 'regen', 'thorns', 'aegis', 'defense'];
    return buffs.includes(props.effect.effect) ? 'positive' : 'negative';
});
</script>

<template>
    <q-badge
        v-if="type === 'badge'"
        :color="colorClass"
    >
        {{ icon }} {{ effect.effect }}
    </q-badge>
    <span :class="'text-' + colorClass" v-else>
        {{ icon }} {{ effect.effect }}
    </span>
</template>

<style scoped>
/* –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ */
</style>