(()=>{"use strict";const e=new URLSearchParams(window.location.search),t="1"===e.get("debug-sdk")||!0,n="#ffcc00";class o{constructor(e=""){this.info=t?(...e)=>{console.info(`%c ysdk %c${this.tag}%c`,[`border: 1px ${n} solid;`,"color: #000;",`background: ${n};`,`border-radius: ${this.tag?"4px 0 0 4px":"4px"};`,"padding: 2px 0px;"].join(""),[`border: 1px ${n} solid;`,"color: #000;","background: #fff;","border-radius: 0 4px 4px 0;","padding: 2px 4px;"].join(""),null,...e)}:()=>{},this.tag=e}}let i={};try{const t=e.get("mocks");t&&(i=JSON.parse(null!=t?t:"{}"),window.webgamesMocks=i)}catch(e){console.error("Can't parse sdk mocks",e)}class r{constructor(e){this.storageKey=e}_getGameData(){var e;if("function"==typeof(null===(e=window.localStorage)||void 0===e?void 0:e.getItem))try{const e=window.localStorage.getItem(this.storageKey);return JSON.parse(null!=e?e:"{}")}catch(e){return void console.error(e)}else console.error("Local storage getItem is not available")}getFromLocalStorage(e,t){var n;const o=this._getGameData();if(!o)return;const i=null!==(n=o[e])&&void 0!==n?n:{};return(null==t?void 0:t.length)?t.reduce(((e,t)=>(i[t]&&(e[t]=i[t]),e)),{}):i}_setGameData(e){var t;if("function"!=typeof(null===(t=window.localStorage)||void 0===t?void 0:t.setItem))return console.error("Local storage setItem is not available"),!1;try{return window.localStorage.setItem(this.storageKey,JSON.stringify(e)),!0}catch(e){return console.error(e),!1}}setToLocalStorage(e,t){const n=this._getGameData();return!!n&&(n[e]=t,this._setGameData(n))}}var a,c,d,u,s,l,g,M,v,I,N;!function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.TABLET="tablet",e.TV="tv"}(a||(a={})),function(e){e.az="az",e.by="by",e["co.il"]="co.il",e.com="com",e["com.am"]="com.am",e["com.ge"]="com.ge",e["com.tr"]="com.tr",e.de="de",e.ee="ee",e.fr="fr",e.kz="kz",e.lt="lt",e.lv="lv",e.md="md",e.ru="ru",e.tj="tj",e.tm="tm",e.uz="uz"}(c||(c={})),function(e){e.EXIT="EXIT",e.HISTORY_BACK="HISTORY_BACK"}(d||(d={})),function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.be="be",e.bg="bg",e.bn="bn",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es="es",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fr="fr",e.gl="gl",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.hy="hy",e.id="id",e.is="is",e.it="it",e.ja="ja",e.ka="ka",e.kk="kk",e.km="km",e.kn="kn",e.ky="ky",e.lo="lo",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mn="mn",e.mr="mr",e.ms="ms",e.my="my",e.ne="ne",e.nl="nl",e.no="no",e.pl="pl",e.pt="pt",e.ro="ro",e.ru="ru",e.si="si",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.tg="tg",e.th="th",e.tk="tk",e.tl="tl",e.tr="tr",e.uk="uk",e.ur="ur",e.uz="uz",e.vi="vi",e.zh="zh",e.zu="zu"}(u||(u={})),function(e){e.ALLOW="allow",e.FORBID="forbid",e.NOT_SET="not_set"}(s||(s={})),function(e){e.NUMERIC="numeric",e.TIME="time"}(l||(l={})),function(e){e.GetPlayerEntry="leaderboards.getPlayerEntry",e.SetScore="leaderboards.setScore"}(g||(g={})),function(e){e.NOT_PAYING="not_paying",e.PARTIALLY_PAYING="partially_paying",e.PAYING="paying",e.UNKNOWN="unknown"}(M||(M={})),function(e){e.ACCEPTED="accepted",e.REJECTED="rejected"}(v||(v={})),function(e){e.GetLeaderboardPlayerEntry="leaderboards.getLeaderboardPlayerEntry",e.SetLeaderboardScore="leaderboards.setLeaderboardScore"}(I||(I={})),function(e){e.AUTHORIZED="",e.NOT_AUTHORIZED="lite"}(N||(N={}));var y=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const f={app:{id:""},i18n:{lang:u.en,tld:c.com},payload:null},m={getBannerAdvStatus:()=>y(void 0,void 0,void 0,(function*(){return{stickyAdvIsShowing:!1}})),hideBannerAdv:()=>{},showBannerAdv:()=>y(void 0,void 0,void 0,(function*(){return{}})),showFullscreenAdv:()=>{},showRewardedVideo:()=>{}},L={isDesktop:()=>!0,isMobile:()=>!1,isTV:()=>!1,isTablet:()=>!1,type:a.DESKTOP},j={canShowPrompt:()=>y(void 0,void 0,void 0,(function*(){return{canShow:!1}})),showPrompt:()=>y(void 0,void 0,void 0,(function*(){return{outcome:v.REJECTED}}))},w={getData:()=>y(void 0,void 0,void 0,(function*(){return{}})),getIDsPerGame:()=>y(void 0,void 0,void 0,(function*(){return[]})),getMode:()=>N.AUTHORIZED,getName:()=>"Гость",getPayingStatus:()=>M.UNKNOWN,getPhoto:()=>"",getStats:()=>y(void 0,void 0,void 0,(function*(){return{}})),getUniqueID:()=>"",incrementStats:()=>y(void 0,void 0,void 0,(function*(){return{}})),isAuthorized:()=>!0,setData:()=>y(void 0,void 0,void 0,(function*(){})),setStats:()=>y(void 0,void 0,void 0,(function*(){})),signature:""},D={appID:"",default:!1,description:{invert_sort_order:!0,score_format:{options:{decimal_offset:0}},type:l.NUMERIC},name:"",title:{[u.en]:"Leaders"}},T={formattedScore:"0",player:{lang:"en",publicName:"Guest",scopePermissions:{avatar:s.ALLOW,public_name:s.ALLOW},uniqueID:"",getAvatarSrc:()=>"",getAvatarSrcSet:()=>""},rank:1,score:0},A={getLeaderboardDescription:()=>y(void 0,void 0,void 0,(function*(){return D})),getLeaderboardEntries:()=>y(void 0,void 0,void 0,(function*(){return{entries:[],leaderboard:D,ranges:[],userRank:1}})),getLeaderboardPlayerEntry:()=>y(void 0,void 0,void 0,(function*(){return T})),setLeaderboardScore:()=>y(void 0,void 0,void 0,(function*(){}))},p={consumePurchase:()=>y(void 0,void 0,void 0,(function*(){})),getCatalog:()=>y(void 0,void 0,void 0,(function*(){return[]})),getPurchases:()=>y(void 0,void 0,void 0,(function*(){const e=[];return Object.defineProperty(e,"signature",{enumerable:!1,configurable:!1,get:()=>""}),e})),purchase:()=>y(void 0,void 0,void 0,(function*(){return{productID:"",purchaseToken:"",signature:""}}))},S={[d.EXIT]:d.EXIT,[d.HISTORY_BACK]:d.HISTORY_BACK},h=new o,b={adv:m,auth:{openAuthDialog:()=>y(void 0,void 0,void 0,(function*(){}))},clipboard:{writeText:e=>(new o("clipboard").info("writeText",e),navigator.clipboard.writeText(e))},deviceInfo:L,environment:f,EVENTS:S,leaderboards:(E=A,{getDescription:e=>E.getLeaderboardDescription(e),getEntries:e=>E.getLeaderboardEntries(e),getPlayerEntry:e=>E.getLeaderboardPlayerEntry(e),setScore:(e,t)=>E.setLeaderboardScore(e,t)}),payments:p,shortcut:j,dispatchEvent:(e,t)=>y(void 0,void 0,void 0,(function*(){h.info("dispatchEvent",e,t)})),getStorage:()=>y(void 0,void 0,void 0,(function*(){const e=window.localStorage;return h.info("getStorage()",e),e})),isAvailableMethod:e=>y(void 0,void 0,void 0,(function*(){const t=[g.SetScore,g.GetPlayerEntry,I.GetLeaderboardPlayerEntry,I.SetLeaderboardScore].includes(e);return h.info("isAvailableMethod",e,t),t})),on:(e,t)=>(h.info("on",e,t),()=>{}),serverTime:()=>{const e=Date.now();return h.info("serverTime",e),e}};var E,x=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const z=new o,O=new o("features"),C={LoadingAPI:{ready:()=>{O.info("LoadingAPI.ready()")}},GameplayAPI:{start:()=>{O.info("GameplayAPI.start()")},stop:()=>{O.info("GameplayAPI.stop()")}},GamesAPI:{getAllGames:()=>x(void 0,void 0,void 0,(function*(){const e={games:[],developerURL:""};return O.info("GamesAPI.getAllGames()",e),e})),getGameByID:()=>x(void 0,void 0,void 0,(function*(){const e={isAvailable:!1};return O.info("GamesAPI.getGameByID()",e),e}))}},k=new o("feedback"),U={features:C,feedback:{canReview:()=>x(void 0,void 0,void 0,(function*(){const e={value:!1};return k.info("canReview()",e),e})),requestReview:()=>x(void 0,void 0,void 0,(function*(){const e={feedbackSent:!1};return k.info("requestReview()",e),e}))},getFlags:e=>x(void 0,void 0,void 0,(function*(){var t;return z.info(e?`getFlags with params: ${e}`:"getFlags()"),null!==(t=null==e?void 0:e.defaultFlags)&&void 0!==t?t:{}})),getLeaderboards:()=>x(void 0,void 0,void 0,(function*(){return A})),getPayments:()=>x(void 0,void 0,void 0,(function*(){return p})),getPlayer:()=>x(void 0,void 0,void 0,(function*(){return z.info("getPlayer()"),w})),onEvent:(e,t)=>(z.info("onEvent",e,t),()=>{})},P=Object.assign(Object.assign({},b),U),Y=e=>{e.onselectstart=()=>!1,e.onmousedown=()=>!1},G=["position: absolute","top: 0px","bottom: 0px","left: 0px","right: 0px","height: calc(var(--vh, 1vh) * 100)","display: flex","align-items: center","justify-content: center","z-index: 9999"],Q=(e,t)=>{e.style.cssText=t.join(";")},R=e=>{const t=document.createElement("div");return t.id=e,Y(t),Q(t,[...G,"background-color: rgba(0, 0, 0, 0.85)"]),document.body.appendChild(t),t},Z=e=>{const t=document.getElementById(e);t&&(null==t||t.remove())},B=(e,t)=>{if(document.getElementById(e))return;const n=document.createElement("style");n.id=e,n.textContent=t.replace(/ /g,"").replace(/\n/g,""),document.head.appendChild(n)},W=new o("adv"),H="ADV_BANNER",V=(e,t)=>{W.info(`${e} onOpen`,{isUsedInGame:"function"==typeof(null==t?void 0:t.onOpen)}),"function"==typeof(null==t?void 0:t.onOpen)&&t.onOpen()},J=(e,t)=>{let n=document.createElement("div");n.innerText=t,n.className="webgames-adv-label",e.appendChild(n)},F=(e,t,n)=>{const o=document.createElement("img");o.src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgNzIgNzIiIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiPjxwYXRoIGQ9Ik0gMTkgMTUgQyAxNy45NzcgMTUgMTYuOTUxODc1IDE1LjM5MDg3NSAxNi4xNzE4NzUgMTYuMTcxODc1IEMgMTQuNjA5ODc1IDE3LjczMzg3NSAxNC42MDk4NzUgMjAuMjY2MTI1IDE2LjE3MTg3NSAyMS44MjgxMjUgTCAzMC4zNDM3NSAzNiBMIDE2LjE3MTg3NSA1MC4xNzE4NzUgQyAxNC42MDk4NzUgNTEuNzMzODc1IDE0LjYwOTg3NSA1NC4yNjYxMjUgMTYuMTcxODc1IDU1LjgyODEyNSBDIDE2Ljk1MTg3NSA1Ni42MDgxMjUgMTcuOTc3IDU3IDE5IDU3IEMgMjAuMDIzIDU3IDIxLjA0ODEyNSA1Ni42MDkxMjUgMjEuODI4MTI1IDU1LjgyODEyNSBMIDM2IDQxLjY1NjI1IEwgNTAuMTcxODc1IDU1LjgyODEyNSBDIDUxLjczMTg3NSA1Ny4zOTAxMjUgNTQuMjY3MTI1IDU3LjM5MDEyNSA1NS44MjgxMjUgNTUuODI4MTI1IEMgNTcuMzkxMTI1IDU0LjI2NTEyNSA1Ny4zOTExMjUgNTEuNzM0ODc1IDU1LjgyODEyNSA1MC4xNzE4NzUgTCA0MS42NTYyNSAzNiBMIDU1LjgyODEyNSAyMS44MjgxMjUgQyA1Ny4zOTAxMjUgMjAuMjY2MTI1IDU3LjM5MDEyNSAxNy43MzM4NzUgNTUuODI4MTI1IDE2LjE3MTg3NSBDIDU0LjI2ODEyNSAxNC42MTA4NzUgNTEuNzMxODc1IDE0LjYwOTg3NSA1MC4xNzE4NzUgMTYuMTcxODc1IEwgMzYgMzAuMzQzNzUgTCAyMS44MjgxMjUgMTYuMTcxODc1IEMgMjEuMDQ4MTI1IDE1LjM5MTg3NSAyMC4wMjMgMTUgMTkgMTUgeiIvPjwvc3ZnPg==",o.className="webgames-adv-label webgames-adv-cross";let i=3;if(n){const t=document.createElement("div"),n=setInterval((()=>{i-=1,i>0?t.innerText=`${i}`:(e.removeChild(t),clearInterval(n))}),1e3);t.className="webgames-adv-label webgames-adv-cross webgames-adv-timer",t.innerText=`${i}`,e.appendChild(t)}o.onclick=()=>{n&&(i<=0?(W.info("showRewardedVideo onRewarded",{isUsedInGame:"function"==typeof(null==t?void 0:t.onRewarded)}),"function"==typeof(null==t?void 0:t.onRewarded)&&t.onRewarded()):(W.info("showRewardedVideo onCancel",{isUsedInGame:"function"==typeof(null==t?void 0:t.onCancel)}),"function"==typeof(null==t?void 0:t.onCancel)&&t.onCancel())),W.info((n?"showRewardedVideo":"showFullscreenAdv")+" onClose",Object.assign(Object.assign({},!n&&{wasShown:!0}),{isUsedInGame:"function"==typeof(null==t?void 0:t.onClose)})),"function"==typeof(null==t?void 0:t.onClose)&&t.onClose(!n||void 0),Z(H)},e.appendChild(o)},X="MODAL_BACKGROUND",_=({captions:e,title:t})=>(B("MODAL_STYLESHEET",[".webgames-modal {","position: relative;","display: flex;","flex-direction: column;","border-radius: 8px;","background-color: white;","padding: 16px;","font-size: 24px;","color: #212121;","}",".webgames-buttons-container {","position: relative;","display: flex;","flex-direction: row;","align-items: center;","justify-content: center;","margin-top: 16px;","}",".webgames-action-button {","padding: 8px;","border-width: 0px;","font-size: 16px;","border-radius: 4px;","cursor: pointer;","}",".webgames-action-button:hover {","opacity: 0.75;","}",".webgames-confirm-button {","background-color: rgb(2, 136, 209);","color: white;","margin-right: 8px;","}",".webgames-cancel-button {","color: #212121;","}"].join("")),new Promise(((n,o)=>{const i=R(X),r=document.createElement("div");r.className="webgames-modal",r.innerText=t;const{cancel:a,confirm:c}=((e,t)=>{const n=document.createElement("div");n.className="webgames-buttons-container";const o=document.createElement("button");o.className="webgames-action-button webgames-confirm-button",o.innerHTML=t.confirm;const i=document.createElement("button");return i.className="webgames-action-button webgames-cancel-button",i.innerHTML=t.cancel,n.appendChild(o),n.appendChild(i),e.appendChild(n),{confirm:o,cancel:i}})(r,e);a.addEventListener("click",(()=>{Z(X),o()})),c.addEventListener("click",(()=>{Z(X),n()})),i.appendChild(r)}))),K=new o("auth"),$=()=>{const e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():u.en};var q;!function(e){e.LANDSCAPE="landscape",e.NONE="none",e.PORTRAIT="portrait"}(q||(q={}));const ee="adapter-rotation-banner";let te;const ne=e=>{if(te)return;if(te=t=>{return n=void 0,i=void 0,a=function*(){var n,i;if(new o("orientation").info("orientationListener",t),((null===(i=null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.type)||void 0===i?void 0:i.includes("portrait"))||window.innerHeight/window.innerWidth>1)===(e===q.LANDSCAPE)){if(document.getElementById(ee))return;const t=document.createElement("div");t.id=ee,Y(t),Q(t,[...G,"background-color: white"]),document.body.appendChild(t);const n=document.createElement("img");n.style.width="160px",e===q.PORTRAIT&&(n.style.transform="rotate(90deg) scaleY(-1)"),n.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxNTMgMTYzIj48ZyBvcGFjaXR5PSIuNSI+PHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjEyNSIgeD0iMiIgeT0iLTIiIGZpbGw9IiNDRkNGREMiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI0IiByeD0iMTQiIHRyYW5zZm9ybT0ibWF0cml4KC0xIDAgMCAxIDE1MyA0KSIvPjxwYXRoIGZpbGw9IiNGNEY0RjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEyOC45NjUgOGgxLjYzNWM1LjA0IDAgNy41NjEgMCA5LjQ4Ni45OGE5LjAwMyA5LjAwMyAwIDAgMSAzLjkzMyAzLjkzNEMxNDUgMTQuODQgMTQ1IDE3LjM2IDE0NSAyMi40djg0LjJjMCA1LjA0IDAgNy41NjEtLjk4MSA5LjQ4NmE5LjAwNiA5LjAwNiAwIDAgMS0zLjkzMyAzLjkzM2MtMS45MjUuOTgxLTQuNDQ2Ljk4MS05LjQ4Ni45ODFIOTkuNGMtNS4wNCAwLTcuNTYgMC05LjQ4Ni0uOTgxYTkuMDAzIDkuMDAzIDAgMCAxLTMuOTMzLTMuOTMzQzg1IDExNC4xNjEgODUgMTExLjY0IDg1IDEwNi42VjIyLjRjMC01LjA0IDAtNy41Ni45OC05LjQ4NmE5IDkgMCAwIDEgMy45MzQtMy45MzNDOTEuODQgOCA5NC4zNiA4IDk5LjQgOGgxLjYzNWEzLjUgMy41IDAgMCAwIDMuNDY1IDRoMjFhMy41IDMuNSAwIDAgMCAzLjQ2NS00WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9nPjxyZWN0IHdpZHRoPSI3MiIgaGVpZ2h0PSIxMjUiIHg9IjIiIHk9IjE2MSIgZmlsbD0iIzkwOTE5RCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjQiIHJ4PSIxNCIgdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDIgMTYxKSIvPjxwYXRoIGZpbGw9IiNGNEY0RjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTggMTM4Ljk2NXYxLjYzNWMwIDUuMDQgMCA3LjU2MS45OCA5LjQ4NmE5LjAwMyA5LjAwMyAwIDAgMCAzLjkzNCAzLjkzM0MxNC44NCAxNTUgMTcuMzYgMTU1IDIyLjQgMTU1aDg0LjJjNS4wNCAwIDcuNTYxIDAgOS40ODYtLjk4MWE5LjAwNiA5LjAwNiAwIDAgMCAzLjkzMy0zLjkzM2MuOTgxLTEuOTI1Ljk4MS00LjQ0Ni45ODEtOS40ODZ2LTMxLjJjMC01LjA0IDAtNy41NjEtLjk4MS05LjQ4NmE5LjAwMyA5LjAwMyAwIDAgMC0zLjkzMy0zLjkzM0MxMTQuMTYxIDk1IDExMS42NCA5NSAxMDYuNiA5NUgyMi40Yy01LjA0IDAtNy41NiAwLTkuNDg2Ljk4YTkgOSAwIDAgMC0zLjkzMyAzLjkzNEM4IDEwMS44NCA4IDEwNC4zNiA4IDEwOS40djEuNjM1YTMuNSAzLjUgMCAwIDEgNCAzLjQ2NXYyMWEzLjUgMy41IDAgMCAxLTQgMy40NjVaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBzdHJva2U9IiM1NjQxRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI2IiBkPSJtMzYgNjkuNiA4LjU3NCA4LjU3NU01Mi44NTIgNzAgNDQuNyA3OC4xNTMiLz48cGF0aCBmaWxsPSIjNTY0MUZGIiBkPSJNNDEuNyA3NmEzIDMgMCAxIDAgNiAwaC02Wm0yNy0yMmEzIDMgMCAwIDAgMC02djZabS0yMSAyMlY2M2gtNnYxM2g2Wm05LTIyaDEydi02aC0xMnY2Wm0tOSA5YTkgOSAwIDAgMSA5LTl2LTZjLTguMjg0IDAtMTUgNi43MTYtMTUgMTVoNloiLz48L3N2Zz4=",t.appendChild(n)}else{const e=document.getElementById(ee);e&&(null==e||e.remove())}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{d(a.next(e))}catch(e){t(e)}}function c(e){try{d(a.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,c)}d((a=a.apply(n,i||[])).next())}));var n,i,r,a},/iPad|iPhone|iPod/.test(window.navigator.platform)||window.navigator.userAgent.includes("Mac")&&"ontouchend"in document)return te(),void window.addEventListener("resize",te);const{orientation:t}=window.screen;if("function"==typeof(null==t?void 0:t.lock)){try{const n=e===q.PORTRAIT?"portrait":"landscape";t.lock(n)}catch(e){console.warn(e)}te(),t.addEventListener("change",te)}else te(),window.addEventListener("orientationchange",te)},oe=new o("deviceInfo"),ie=()=>{var e,t;const n=(()=>{if(navigator&&navigator.userAgent){const e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return a.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return a.TABLET}return a.DESKTOP})(),o=null!==(t=null===(e=window.webgamesMocks)||void 0===e?void 0:e.lockedOrientation)&&void 0!==t?t:q.NONE;return o!==q.NONE&&n===a.MOBILE&&ne(o),{isDesktop:()=>{const e=n===a.DESKTOP;return oe.info("isDesktop",e),e},isMobile:()=>{const e=n===a.MOBILE;return oe.info("isMobile",e),e},isTV:()=>{const e=n===a.TV;return oe.info("isTV",e),e},isTablet:()=>{const e=n===a.TABLET;return oe.info("isTablet",e),e},get type(){return oe.info("type",n),n}}};var re;!function(e){e.LARGE="large",e.MEDIUM="medium",e.SMALL="small"}(re||(re={}));var ae=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const ce=new o("leaderboards"),de=(e,t,n)=>ae(void 0,void 0,void 0,(function*(){const o=e.getFromLocalStorage("leaderboards");if(!o)throw new Error("Unable to get leaderboard score");if(o[t]=n,ce.info("setScore",t,n,o),!e.setToLocalStorage("leaderboards",o))throw new Error("Unable to set leaderboard score")})),ue=(e,t,n,...o)=>ae(void 0,[e,t,n,...o],void 0,(function*(e,t,n,o=!1){const i=e.getFromLocalStorage("leaderboards");if(!i)throw new Error("Unable to get leaderboard score");const r=i[n],a=$(),c={score:null!=r?r:0,extraData:"",rank:1,player:{getAvatarSrc:()=>t.getPhoto(re.SMALL),getAvatarSrcSet:()=>t.getPhoto(re.SMALL),lang:a,publicName:t.getName()},formattedScore:(null!=r?r:0).toLocaleString(a)};return o||ce.info("getPlayerEntry",n,c),c})),se=(e,t,n,...o)=>ae(void 0,[e,t,n,...o],void 0,(function*(e,t,n,o=!1){const i={ranges:[{start:1,size:1}],userRank:1,entries:[yield ue(e,t,n)]};return o||ce.info("getEntries",n,i),i})),le=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16))),ge="webgames-adapter-player",Me=new o("player"),ve=()=>{const e=window.localStorage.getItem(ge),t=JSON.parse(null!=e?e:"{}");return(null==t?void 0:t.id)?null==t?void 0:t.id:(t.id=le(),window.localStorage.setItem(ge,JSON.stringify(t)),Me.info("new id was generated and saved",t.id),t.id)};var Ie=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const Ne=(e,t)=>({getDescription:A.getLeaderboardDescription,getEntries:n=>se(e,t,n),getPlayerEntry:n=>ue(e,t,n),setScore:(t,n)=>de(e,t,n)}),ye="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxMzIgMTMyIj48cGF0aCBmaWxsPSIjOTA5MTlEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02NiAxMzEuMDFDMzAuMTU0IDEzMS4wMS45OSAxMDEuODQ3Ljk5IDY2IC45OSAzMC4xNTQgMzAuMTU0Ljk5IDY2IC45OWMzNS44NDcgMCA2NS4wMSAyOS4xNjQgNjUuMDEgNjUuMDEgMCAzNS44NDctMjkuMTYzIDY1LjAxLTY1LjAxIDY1LjAxWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PG1hc2sgaWQ9ImEiIHdpZHRoPSIxMzIiIGhlaWdodD0iMTMyIiB4PSIwIiB5PSIwIiBtYXNrLXR5cGU9ImFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDBoMTMydjEzMkgwIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L21hc2s+PGcgbWFzaz0idXJsKCNhKSI+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOTEuNjEgMzEuMjlzLTYuNi0uMzE0LTkuNzQyLTEuMjYzYzIuODI4LTIuODQxIDIuODI4LTguMjEzIDIuODI4LTguMjEzcy02LjkxNCAyLjg0Mi0xNi42NTcgMi44NDJjLTYuOTE0LS4zMTQtOS40MjktMS4yNjQtMTQuNDU4IDMuNzkzLTUuOTcgNi01Ljk3IDcuNTgxLTkuNzQyIDcuNTgxIDMuMTQyIDQuNDIyIDEuNTcxIDguODQ3IDEuNTcxIDguODQ3bC0uMzE0IDYuNjM0LjMxNCAxLjI2NHMwIC4zMTQuMzE1Ljk0NmMwIC4zMTcgMCAuOTQ5LjMxNCAxLjI2M2wuOTQyIDUuMDU3cy0uMzE0LjMxNS0uNjI4IDBjLS45NDMtMS4yNjMtMi4yLTEuODk1LTMuNzcxLTEuODk1LS45NDMgMC0yLjUxNSAyLjUyNy0xLjI1NyA2IC45NDIgMi41MyAxLjg4NSA0LjEwNyAyLjgyOCA3LjU4NC45NDMgMy40NzYgMi44MjggNi4wMDIgMy43NzIgNS4zNy4zMTQtLjMxNy42MjgtMS4yNjMuOTQzLTIuODQ0IDAtLjMxNC4zMTQgMCAuNjI4LjMxNy4zMTQgMy4xNi45NDMgNiAxLjU3MiA3LjU4MS42MjguOTUgMS4yNTcgMi4yMTMgMS44ODUgMy4xNi0uNjI4IDUuMzctMS4yNTcgMTIuMDA1LTIuNTE0IDE3LjA1OC03LjgxOCAyLjExNy0xOS42MjkgNS42MjgtMzAuMTY2IDguMTg0IDEyLjA0MyAxMi44NjEgMjcuNSAxOS4yMDIgNDYuNTA4IDE5LjIwMiAxNC43OTQgMCAyNi4yMDMtMy44MzkgMzcuMjA5LTEyLjA2LTkuMDcxLTUuNDQxLTIwLjM3Ny0xMy40My0yNS4yNjUtMTMuNDNINjYuNzhjLTIuODI4IDAtOC44LTIuNTI4LTkuNDI4LTQuNzM3LS42MjktMS41OC0uNjI5LTQuNDI1LS4zMTUtNi45NTIgMC0uMzE0LjYzLS4zMTQuOTQ0IDAgMi41MTQgMi44NDUgMy43NyA0Ljc0IDYuMjg1IDQuNzRoNS42NTdjMi4yIDAgOS43NDMtNi42MzUgMTIuODg2LTE0Ljg0Ny42My0xLjg5OCAxLjI1Ny01LjA1NyAxLjU3Mi04LjUzIDAtLjMxNy4zMTQtLjYzNS4zMTQtLjMxNy4zMTQgMS41OC45NDMgMy40NzYgMS4yNTcgMy40NzYuOTQzLjYzMSAyLjItMS44OTUgMy43NzEtNS4zNzEgMS41NzItMy4xNiAxLjU3Mi01LjA1NCAyLjItNy41ODUuOTQzLTMuNDcyLS4zMTQtNS45OTktMS4yNTctNS45OTktLjk0MyAwLTEuNTcxLjMxNC0yLjIuOTQ2LS4zMTQgMC0uNjI4IDAtLjYyOC0uMzE0IDAtMi4yMTMuMzE0LTUuNjg5IDIuODI5LTcuNTg0LTMuNDU4LTMuMTU4LTEuMjU4LTguNTMtMS4yNTgtOC41MyAxLjI1OC42MzIgMy4xNDMuNjMyIDMuMTQzLjYzMmwtMi41MTQtNC4xMDhjMS44ODUtLjMxNCAzLjQ1Ny0xLjg5NSAzLjQ1Ny0xLjg5NXMtNS4wMjgtMS4yNjMtNy41NDMtMy4xNThjMi4yLS42MzIgNS42NTctMi44NDUgNS42NTctMi44NDVaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBzdHJva2U9IiM5MDkxOUQiIGQ9Ik0xMzEuNSA2NmMwIDM2LjE3NS0yOS4zMjUgNjUuNS02NS41IDY1LjVTLjUgMTAyLjE3NS41IDY2IDI5LjgyNS41IDY2IC41czY1LjUgMjkuMzI1IDY1LjUgNjUuNVoiLz48L2c+PC9zdmc+";const fe=[{description:"Well styled modern avatar icon",id:"avatar",imageURI:ye,price:"1 USD",priceCurrencyCode:"USD",priceValue:"1",title:"Premium avatar",getPriceCurrencyImage:"return ''"}],me=()=>{return e=void 0,t=void 0,o=function*(){try{return(yield fetch("./purchases-catalog.json")).json()}catch(e){return fe}},new((n=void 0)||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}));var e,t,n,o};var Le=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const je=new o("payments");var we=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const De=new o("player");var Te=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};let Ae=[],pe=!1;const Se=new o("player"),he=(e,t)=>Te(void 0,void 0,void 0,(function*(){const n=e.getFromLocalStorage("stats",t);if(Se.info("getStats","keys:",t,"result:",n),!n)throw new Error("Unable to get stats");return n})),be=(e,t)=>Te(void 0,void 0,void 0,(function*(){if(Se.info("setStats",t),!e.setToLocalStorage("stats",t))throw new Error("Unable to set stats")})),Ee=(e,t)=>Te(void 0,void 0,void 0,(function*(){return new Promise((n=>Te(void 0,void 0,void 0,(function*(){const o=()=>Te(void 0,void 0,void 0,(function*(){const o=yield(t=>Te(void 0,void 0,void 0,(function*(){Se.info("incrementStats",t);const n=yield he(e),{allStats:o,updatedStats:i}=((e,t)=>{const n=Object.assign({},t),o={};return Object.keys(e).forEach((t=>{let i=e[t];if("number"==typeof i||(i=Number.parseInt(null!=i?i:"0",10),!Number.isNaN(i))){if(!n[t])return n[t]=i,void(o[t]=n[t]);n[t]+=i,o[t]=n[t]}})),{allStats:n,updatedStats:o}})(t,n);return yield be(e,o),i})))(t);if(n(o),Ae.length>0){const e=Ae.pop();"function"==typeof e&&e()}else pe=!1}));pe?Ae.push(o):(pe=!0,o())}))))}));var xe=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const ze=new o("player");var Oe=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))},Ce=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}d((o=o.apply(e,t||[])).next())}))};const ke=new o;window.YaGames={init:()=>Ce(void 0,void 0,void 0,(function*(){const e=new r("webgames-dev-adapter"),t=(e=>({getData:t=>xe(void 0,void 0,void 0,(function*(){return((e,t)=>we(void 0,void 0,void 0,(function*(){const n=e.getFromLocalStorage("data",t);if(De.info("getData","keys:",t,"result:",n),!n)throw new Error("Unable to get data");return n})))(e,t)})),getIDsPerGame:()=>Promise.resolve([]),getMode:()=>{const e=i.isAuthorized?N.AUTHORIZED:N.NOT_AUTHORIZED;return ze.info("getMode()",e),e},getName:()=>"Guest",getPayingStatus:()=>M.UNKNOWN,getPhoto:()=>ye,getStats:t=>xe(void 0,void 0,void 0,(function*(){return he(e,t)})),getUniqueID:()=>{const e=ve();return ze.info("getUniqueID",e),e},incrementStats:t=>xe(void 0,void 0,void 0,(function*(){return Ee(e,t)})),isAuthorized:()=>{var e;const t=null!==(e=i.isAuthorized)&&void 0!==e&&e;return ze.info("isAuthorized()",t),t},setData:t=>xe(void 0,void 0,void 0,(function*(){return((e,t)=>we(void 0,void 0,void 0,(function*(){if(De.info("setData",t),!e.setToLocalStorage("data",t))throw new Error("Unable to set data")})))(e,t)})),setStats:t=>xe(void 0,void 0,void 0,(function*(){return be(e,t)})),get signature(){return""}}))(e),n=(e=>({getPurchases:()=>Le(void 0,void 0,void 0,(function*(){const t=(e=>{const t=e.getFromLocalStorage("purchases");if(!t)throw new Error("Unable to get purchases from storage");return Object.values(t)})(e);return je.info("getPurchases",t),t})),getCatalog:()=>Le(void 0,void 0,void 0,(function*(){var e;const t=null!==(e=(yield me()).map((e=>Object.assign(Object.assign({},e),{getPriceCurrencyImage:Function(e.getPriceCurrencyImage)}))))&&void 0!==e?e:[];return je.info("getCatalog",t),t})),purchase:t=>Le(void 0,void 0,void 0,(function*(){var n;const{developerPayload:o,id:i}=null!=t?t:{},r=yield me();try{const a=r.find((e=>e.id===i));if(!a)throw new Error(`No product in catalog with id: ${i}`);yield _({captions:{confirm:"Purchase",cancel:"Cancel"},title:"Purchase dialog"});const c={productID:null!==(n=null==a?void 0:a.id)&&void 0!==n?n:"",purchaseToken:le(),developerPayload:o};((e,t)=>{const n=e.getFromLocalStorage("purchases");if(!n)throw new Error("Unable to get purchases from storage");if(n[t.purchaseToken]=t,!e.setToLocalStorage("purchases",n))throw new Error("Unable to save purchase")})(e,c);const d=Object.assign(Object.assign({},c),{signature:""});return je.info("purchase",t,d),d}catch(e){throw je.info("purchase fail",t),new Error("Payment was canceled")}})),consumePurchase:t=>Le(void 0,void 0,void 0,(function*(){return je.info("consumePurchase",t),((e,t)=>{const n=e.getFromLocalStorage("purchases");if(!n)throw new Error("Unable to get purchases from storage");if(delete n[t],!e.setToLocalStorage("purchases",n))throw new Error("Unable to save purchase")})(e,t)}))}))(e),o=Object.assign(Object.assign({},P),{adv:(B("ADV_STYLESHEET",[".webgames-adv-label {","font-size: 24px;","color: white;","-webkit-text-fill-color: white;","cursor: default;","@media (min-width: 1024px) {","font-size: 48px;","}","}",".webgames-adv-cross {","position: absolute;","cursor: pointer;","top: 16px;","right: 16px;","width: 30px;","height: 30px;","@media (min-width: 1024px) {","width: 48px;","height: 48px;","}","}",".webgames-adv-timer {","right: 48px;","@media (min-width: 1024px) {","right: 64px;","}","}"].join("")),Object.assign(Object.assign({},m),{showFullscreenAdv:(e={callbacks:{}})=>{W.info("showFullscreenAdv()",e);{if(!navigator.onLine)return;const t=R(H);J(t,"Fullscreen Adv"),F(t,null==e?void 0:e.callbacks,!1),V("showFullscreenAdv",null==e?void 0:e.callbacks)}},showRewardedVideo:(e={callbacks:{}})=>{W.info("showRewardedVideo()",e);{if(!navigator.onLine)return;const t=R(H);J(t,"Rewarded Video"),F(t,null==e?void 0:e.callbacks,!0),V("showRewardedVideo",null==e?void 0:e.callbacks)}}})),auth:{openAuthDialog:()=>i.isAuthorized?Promise.reject(new Error("Player is already authorized")):(K.info("openAuthDialog try open"),_({title:"Auth dialog",captions:{confirm:"Sign in",cancel:"Cancel"}}).then((()=>{K.info("openAuthDialog success"),i.isAuthorized=!0})).catch((()=>{K.info("openAuthDialog cancel")})))},deviceInfo:ie(),environment:{app:{get id(){return""}},get i18n(){return{lang:$(),tld:c.com}},get payload(){return new URLSearchParams(window.location.search).get("payload")}},leaderboards:Ne(e,t),payments:n,shortcut:{canShowPrompt:()=>Oe(void 0,void 0,void 0,(function*(){var e,t;return{canShow:null===(t=null===(e=window.webgamesMocks)||void 0===e?void 0:e.canShowPrompt)||void 0===t||t}})),showPrompt:()=>Oe(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=window.webgamesMocks)||void 0===e?void 0:e.canShowPrompt))return{outcome:v.REJECTED};try{return yield _({title:"Shortcut dialog",captions:{confirm:"Add",cancel:"Cancel"}}),{outcome:v.ACCEPTED}}catch(e){return{outcome:v.REJECTED}}}))},getLeaderboards:()=>Ce(void 0,void 0,void 0,(function*(){const n=((e,t)=>({getLeaderboardDescription:A.getLeaderboardDescription,getLeaderboardEntries:n=>Ie(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield se(e,t,n)),{leaderboard:D})})),getLeaderboardPlayerEntry:n=>Ie(void 0,void 0,void 0,(function*(){const o=yield ue(e,t,n);return Object.assign(Object.assign({},o),{player:Object.assign(Object.assign({},o.player),{scopePermissions:{avatar:s.ALLOW,public_name:s.ALLOW},uniqueID:ve()})})})),setLeaderboardScore:(t,n)=>de(e,t,n)}))(e,t);return ke.info("getLeaderboards()",n),n})),getPayments:()=>Ce(void 0,void 0,void 0,(function*(){return ke.info("getPayments()",n),n})),getPlayer:()=>Ce(void 0,void 0,void 0,(function*(){return ke.info("getPlayer()",t),t}))});return o}))}})();